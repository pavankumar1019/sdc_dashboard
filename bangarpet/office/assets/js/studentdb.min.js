$(document).ready((function(){function countdata(){$.ajax({url:"./php_operations/student.php",method:"POST",data:{type:"getcount"},success:function(data){$("#getcountdata").html(data)}})}function load_data(page,query=""){$.ajax({url:"./php_operations/student.php",method:"POST",data:{page:page,query:query,type:"loaddata"},success:function(data){$("#dynamic_content").html(data)}})}countdata(),setInterval((function(){countdata()}),1e3),load_data(1),$(document).on("click",".page-link",(function(){var page,query;load_data($(this).data("page_number"),$("#search_box").val())})),$("#search_box").keyup((function(){var query;load_data(1,$("#search_box").val())})),$(document).on("click","#edit",(function(){var id=$(this).attr("data-id"),type="edit";$.ajax({url:"./php_operations/student.php",method:"POST",data:{id:id,type:type},dataType:"json",success:function(data){$("#id").val(data.id),$("#newadmissionmodal").modal("show"),$("#type").val("update"),$("#sats").val(data.sats),$("#RollNo").val(data.RollNo),$("#student_number").val(data.student_number),$("#StudentName").val(data.StudentName),$("#father_name").val(data.father_name),$("#mother_name").val(data.mother_name),$("#dob").val(data.dob),$("#mobile_no").val(data.mobile_no),$("#combination").val(data.combination),$("#lang_code").val(data.lang_code),$("#class_name").val(data.class_name),$("#Class").val(data.Class),$("#RollNo").attr("disabled","disabled"),$("#sats").attr("disabled","disabled"),$("#student_number").attr("disabled","disabled")}})})),$("#newadmissionform").on("submit",(function(e){e.preventDefault(),$.ajax({method:"POST",url:"./php_operations/student.php",data:$("form").serialize(),beforeSend:function(){$("#submit").val("connecting...")},complete:function(){$("#submit").val("Submit")},success:function(result){load_data(1),$("#newadmissionform").trigger("reset"),$("#newadmissionmodal").modal("hide")}})})),$(document).on("click","#delete",(function(){const swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});swalWithBootstrapButtons.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(result=>{if(result.isConfirmed){var id=$(this).attr("data-id"),type="delete";$.ajax({url:"./php_operations/student.php",method:"POST",data:{id:id,type:type},dataType:"json",success:function(data){swalWithBootstrapButtons.fire("Deleted!","Your file has been deleted.","success"),load_data(1)}})}else result.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelled","Your imaginary file is safe :)","error")})})),$(document).on("click","#btnAdmissionModal",(function(){$("#newadmissionmodal").modal("show"),$("#type").val("add"),$("#RollNo").removeAttr("disabled"),$("#sats").removeAttr("disabled"),$("#student_number").removeAttr("disabled")})),$("#sats").change((function(){var val=$(this).val();$.ajax({url:"./php_operations/student.php",type:"POST",data:{type:"sats_check",value:val},cache:!1,success:function(dataResult){var dataResult;200==(dataResult=JSON.parse(dataResult)).statusCode?$("#error").html("Number Exist"):201==dataResult.statusCode&&$("#error").html("")}})}))}));